# Reducing


Like scanning, reduction is an action that applies an operation across a set of values.
Unlike scanning, reduction only produces one value.
This value is equivalent to the final value in the prefix sum, with all values in the series included in the operation.

For example, the additive reduction of a series of values is just the sum of those values.
Likewise, the multiplicative reduction of a series of values is the product of those values.

MPI provides the `MPI_Reduce` operation to do just this.
Much like `MPI_Scan`, you may define your own operations, but only associative operations may be used.

Here is the signature of `MPI_Reduce`:

```cpp
int MPI_Reduce(const void *sendbuf, void *recvbuf, int count, MPI_Datatype datatype, MPI_Op op, int root, MPI_Comm comm)
```

If the result value of a reduction is simply the final value of a corresponding scan operation, why does MPI include reduction as a separate feature?

Quite simply, it is computationally cheaper and easier to perform a reduction versus a scan.
While a scan needs to ensure that each element includes the "sum" of only the elements at or prior to its index in the input series, a reduction does not need to calculate all of these intermediate values.

Here is a program that performs an element-wise sum of random values arrays. Each element is a random value between 0 and 100 (inclusive), each array is generated by a different process, and the average value for each index is reported by the rank 0 process:

```cpp
{{#include ./code/mpi_reduce.cpp}}
```

As expected, the output values are close to 50 on most runs:

```console
$ mpiexec ./reduce_prog
43,51.1562,44.4688,53.5938,50.8125,44.9688,48.1875,41.1875,42.4062,62.5938
$ mpiexec ./reduce_prog
55.4688,45.5625,53.2188,45.375,52.6875,42.5938,46.5938,54.375,50.625,55.1562
$ mpiexec ./reduce_prog
56.6562,51.8438,55.4375,45.125,41.0938,49.8438,47.8438,41.1875,57.4062,55.4062
$ mpiexec ./reduce_prog
56.6562,51.8438,55.4375,45.125,41.0938,49.8438,47.8438,41.1875,57.4062,55.4062
```
